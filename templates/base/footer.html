{% load static %}

<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-lg-3 col-md-6 col-sm-6">
                <div class="footer__about">
                    <div class="footer__logo">
                        <a href="#"><img src="{% static 'img/footer-logo.png' %}" alt=""></a>
                    </div>
                    <p>The customer is at the heart of our unique business model, which includes design.</p>
                    <a href="#"><img src="{% static 'img/payment.png' %}" alt=""></a>
                </div>
            </div>
            <div class="col-lg-2 offset-lg-1 col-md-3 col-sm-6">
                <div class="footer__widget">
                    <h6>Shopping</h6>
                    <ul>
                        <li><a href="#">Clothing Store</a></li>
                        <li><a href="#">Trending Shoes</a></li>
                        <li><a href="#">Accessories</a></li>
                        <li><a href="#">Sale</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-lg-2 col-md-3 col-sm-6">
                <div class="footer__widget">
                    <h6>Shopping</h6>
                    <ul>
                        <li><a href="#">Contact Us</a></li>
                        <li><a href="#">Payment Methods</a></li>
                        <li><a href="#">Delivary</a></li>
                        <li><a href="#">Return & Exchanges</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-lg-3 offset-lg-1 col-md-6 col-sm-6">
                <div class="footer__widget">
                    <h6>NewLetter</h6>
                    <div class="footer__newslatter">
                        <p>Be the first to know about new arrivals, look books, sales & promos!</p>
                        <form novalidate>
                            <input type="text" id="newsletter_email" name="newsletter_email" placeholder="Email">
                            <button type="submit" id="newsletter_btn"><span class="icon_mail_alt"></span></button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12 text-center">
                <div class="footer__copyright__text">
                    <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                    <p>Copyright Â©
                        <script>
                            document.write(new Date().getFullYear());
                        </script>
                    </p>
                </div>
            </div>
        </div>
    </div>
</footer>


{% block extra_scripts %}

<script>
    (function() {

        const subscribe_newsletter_url = "{% url 'core:subscribe_newsletter' %}"
        const newsletter_btn = document.getElementById("newsletter_btn");

        newsletter_btn.addEventListener("click", function(event) {
            event.preventDefault()

            // TODO: spinner

            const email_input = document.getElementById("newsletter_email")
            const email = email_input.value

            if(email === ""){
                email_input.classList.add("input-error");
            }else{
                email_input.classList.remove("input-error");
            }
            
            if(email){
                fetch(subscribe_newsletter_url, {
                    credentials: 'include',
                    method: 'POST',
                    headers: {
                        "X-CSRFToken": getCookie("csrftoken"),
                        "Accept": "application/json",
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        email
                    })
                }).then(
                    response => response.json()
                ).then(function(data) {
                    if(data.success){
                        console.log("OK")
                        email_input.value = ""

                        // TODO: success message
                    }else{
                        console.log("NOTOK")
                        // TODO: success message
                    }          
                })      
            }
        })
    })()
</script>

{% endblock extra_scripts %}